---
title: PostgreSQL Database Connector
description: 'Connect PostgreSQL databases to Collate for comprehensive metadata discovery, lineage tracking, and data quality monitoring. Advanced features for stored procedures and IAM authentication.'
---

# PostgreSQL Database Connector

<CardGroup cols={3}>
  <Card title="Production Ready" icon="check-circle" color="#16a34a">
    Fully supported with all enterprise features
  </Card>
  <Card title="Advanced Features" icon="star" color="#f59e0b">
    Full feature support including stored procedures
  </Card>
  <Card title="Cloud Native" icon="cloud" color="#3b82f6">
    AWS RDS IAM authentication support
  </Card>
</CardGroup>

## Overview

The PostgreSQL connector provides comprehensive metadata management for PostgreSQL databases with full support for lineage tracking, data profiling, and quality monitoring. This connector offers the most complete feature set among all database connectors.

### Supported Features

- ✅ **Metadata Discovery**: Complete schema, table, and column discovery
- ✅ **Query Usage**: Track data access patterns and query performance
- ✅ **Data Profiler**: Statistical analysis and data profiling
- ✅ **Data Quality**: Custom quality tests and validations
- ✅ **dbt Integration**: Native dbt model and lineage support
- ✅ **Data Lineage**: Table and view relationship tracking
- ✅ **Column-level Lineage**: Detailed column dependency mapping
- ✅ **Owners & Tags**: Full metadata management support
- ✅ **Stored Procedures**: Procedure discovery and metadata
- ✅ **Sample Data**: Data sampling for preview and analysis
- ✅ **Auto-Classification**: Automated data classification and PII detection
- ✅ **IAM Authentication**: AWS RDS IAM-based authentication

### Limitations

- ❌ **Stored Procedures Lineage**: Lineage extraction from stored procedure logic (requires additional configuration)

## Prerequisites

### Database Requirements

- PostgreSQL version: Officially supported versions only ([version support policy](https://www.postgresql.org/support/versioning/))
- User with appropriate permissions for metadata extraction
- For lineage and usage: `pg_stat_statements` extension enabled

### User Permissions

#### Basic Metadata Access

```sql
-- Create user for Collate
CREATE USER collate_user WITH PASSWORD 'secure_password';

-- Grant schema access
GRANT USAGE ON SCHEMA information_schema TO collate_user;
GRANT USAGE ON SCHEMA pg_catalog TO collate_user;

-- Grant table access for metadata
GRANT SELECT ON ALL TABLES IN SCHEMA information_schema TO collate_user;
GRANT SELECT ON ALL TABLES IN SCHEMA pg_catalog TO collate_user;

-- Grant usage and lineage permissions
GRANT pg_read_all_stats TO collate_user;
```

#### Advanced Features

```sql
-- For stored procedures access
GRANT USAGE ON SCHEMA your_schema TO collate_user;
GRANT SELECT ON ALL TABLES IN SCHEMA your_schema TO collate_user;

-- For data profiling
GRANT SELECT ON your_schema.your_table TO collate_user;
```

<Accordion title="Stored Procedures Lineage Support">
Starting from Collate **version 1.6.5**, support for **Stored Procedures Lineage** has been introduced. This feature enables tracking the relationships and dependencies between stored procedures and other database objects, enhancing lineage visibility and data traceability.
</Accordion>

<Accordion title="PostgreSQL Version Support">
Note that we only support officially supported PostgreSQL versions. You can check the version list [here](https://www.postgresql.org/support/versioning/).
</Accordion>

### Usage and Lineage considerations

When extracting lineage and usage information from PostgreSQL we base our finding on the `pg_stat_statements` table.
You can find more information about it on the official [docs](https://www.postgresql.org/docs/current/pgstatstatements.html#id-1.11.7.39.6).

Another interesting consideration here is explained in the following SO [question](https://stackoverflow.com/questions/50803147/what-is-the-timeframe-for-pg-stat-statements).
As a summary:
- The `pg_stat_statements` has no time data embedded in it.
- It will show all queries from the last reset (one can call `pg_stat_statements_reset()`).

Then, when extracting usage and lineage data, the query log duration will have no impact, only the query limit.

**Note:** For usage and lineage grant your user `pg_read_all_stats` permission.

```sql
GRANT pg_read_all_stats TO your_user;
```

### IAM Authentication

In order to be able to connect via IAM, you need to have the following:

1. **Database is configured to use IAM authentication**
   Ensure that the RDS has IAM DB authentication enabled. Otherwise, you can click on Modify to enable it.

2. **The user has the necessary IAM permissions**
   Even if you use IAM to connect to postgres, you need to specify a user to prepare the connection. You need to create a user as follows:

```sql
CREATE USER iam_user WITH LOGIN;
GRANT rds_iam TO iam_user;
```

3. **The AWS Role has the necessary permissions**
   The role that is going to be used to perform the ingestion, needs to have the following permissions:

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "rds-db:connect"
            ],
            "Resource": [
                "arn:aws:rds-db:eu-west-1:<aws_account_number>:dbuser:<rds_db_resource_id>/<postgres_user>"
            ]
        }
    ]
}
```

Otherwise, you might be finding issues such as:
```
PAM authentication failed for user "<user>"
```