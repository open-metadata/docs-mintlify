---
title: Okta SSO Configuration
description: 'Configure Okta as your authentication provider to support secure login, identity federation, and enterprise-grade access control.'
---

# Okta SSO

Follow the sections in this guide to set up Okta SSO.

<Accordion title="Security Requirements for Production">
Security requirements for your **production** environment:
- **DELETE** the admin default account shipped by OM in case you had [Basic Authentication](/deployment/security/basic-auth) enabled before configuring the authentication with Okta SSO.
- **UPDATE** the Private / Public keys used for the [JWT Tokens](/deployment/security/enable-jwt-tokens). The keys we provide by default are aimed only for quickstart and testing purposes. They should NEVER be used in a production installation.
</Accordion>

## Create Server Credentials

This document will explain how to create an Okta app and configure it for OAuth. This will generate the information required for Single Sign On with Okta.

### Step 1: Create an Okta Account
- Go to [Create Okta Account](https://developer.okta.com/signup/).
- Provide the required input and click on Sign Up.
- Else you can continue with Google or GitHub.

### Step 2: Create the OIDC App Integration
- Once done with **Signup/Sign** in, you will be redirected to the **Getting Started** page in Okta.

- Click on **Applications -> Applications** in the left navigation panel.

- Click on the **Create App Integration** button.

## Choose Your Authentication Flow

After creating the account, choose the authentication flow you want to use:

- [Implicit Flow](/deployment/security/okta/implicit-flow) (Public)
- [Auth Code Flow](/deployment/security/okta/auth-code-flow) (Confidential)

<Accordion title="Application Types and Authentication Flows">
- **SPA (Single Page Application):**
  This type is designed for implicit flows. In this case, providing both the client ID and client secret will result in a failure because the implicit flow only requires the client ID for authentication.

- **Web:**
  This type is intended for confidential clients. If you select this option, you must provide both the client ID and client secret. Simply passing the client ID will cause the authorization process to fail, as the Authorization Code flow requires both credentials for successful authentication.
  The [OIDC Authorization Code Flow](/deployment/security/oidc) is used in this case, where the client secret is required to securely exchange the authorization code for tokens.

### Recommendation:

- Use the **Web** type for confidential clients that require both a client ID and secret.
- Use the **SPA** type for applications using implicit flows where only a client ID is needed.
</Accordion>

## Auth Code Flow Setup

### Step 1: Configuring the App
- Once you are in the **Create a new app integration** page, select **OIDC - OpenID Connect**.
- Next, select the **Application type -> Web Application**.
- Once selected, click **Next**.

- From the **General Settings** page,
  * Enter an **App integration name**
  * Select the following in **Grant type**:
    * **Authorization Code**
    * **Refresh Token** - For the refresh token behavior, it is recommended to select the option to 'Rotate token after every use'.
    * **Implicit (hybrid)** - Select the options to allow ID Token and Access Token with implicit grant type.
  * Enter the **Sign-in redirect URIs**
    * http://localhost:8585/callback
    * http://localhost:8585/silent-callback
  * Enter the **Sign-out redirect URIs**
  * Enter the **Base URIs**
  * Select the required option for **Controlled access**
- Click **Save**.

- The app is now configured.

### Step 2: Add Authorization Server to get the Issuer URL

#### New Authorization Server
It is recommended to create a separate authorization server for different applications. The authorization server needs an endpoint, which'll be the Issuer URL.
- Click on **Security -> API** in the left navigation panel.

- From the **Authorization Servers** tab, click on **Add Authorization Server** button.

- Enter a Name and Description.
- While creating the authorization server, an **Audience** must be provided for the server. The Audience is the **Client ID** of the single page application that was created.
- **Save** the changes.

This will generate the Issuer URL.

#### Default Authorization Server (not recommended)
It is recommended to create a separate authorization server for different applications. The authorization server needs an endpoint, which'll be the Issuer URL.
- Click on **Security -> API** in the left navigation panel.

- From the **Authorization Servers** tab, click on **default** server.

### Step 3: Change the Issuer URL from Dynamic to Okta URL
Once the Authorization Server has been added, navigate to Security >> API >> Authorization Servers and click on the authorization server created in the previous step.

The Issuer URL shows up as Dynamic by default. Change the Issuer URL to Okta URL and save the changes.

### Step 4: Create a Default Scope
- To create a default scope from **Security -> API**, click on the required **Authorization Server**.

- In the resulting page, click on the **Scopes** tab
- Click on **Add Scope**

- Set as a **Default Scope**.

### Step 5: Add New Access Policy and Rule
- From **Security -> API**, click on the required **Authorization Server**
- Navigate to the **Access Policies Tab**
- Click on **Add New Access Policy**

- To create a policy, add a Name and Description.
- Assign the policy to the required clients.

- Add a new **Rule** inside the policy as required. Rules can be created with just a few grant type details, such as Client Credentials, Authorization Code, Device Authorization, and Token Exchange.
- Click on **Create Rule** to save the changes.

### Step 6: Where to Find the Credentials
- Once the app is configured, the **Client ID** can be used.
- You can also go to **Application -> Application** as in step 2.
- You should be able to see your application in the list.

- Click on your application.
- You will find your **Client ID** and **Okta domain**.
- The **Client authentication** is enabled by default.
- By clicking on the Edit option for General Settings, you can deselect the option for **User consent**. Save the changes.

- Click on the **Sign On** tab from the top navigation bar.
- Click on Edit for **OpenID Connect ID Token**.
- For **Issuer**, change from the Dynamic (based on request domain) option to the **Okta URL** option.
- The **Audience** is the same as the Client ID.

After applying these steps, you can update the configuration of your deployment:

<CardGroup cols={3}>
  <Card title="Docker Security" icon="docker" href="/deployment/security/okta/docker">
    Configure Okta SSO for your Docker Deployment.
  </Card>
  <Card title="Bare Metal Security" icon="server" href="/deployment/security/okta/bare-metal">
    Configure Okta SSO for your Bare Metal Deployment.
  </Card>
  <Card title="Kubernetes Security" icon="kubernetes" href="/deployment/security/okta/kubernetes">
    Configure Okta SSO for your Kubernetes Deployment.
  </Card>
</CardGroup>

## Configuration Examples

### Auth Code Flow Configuration

```yaml
authenticationConfiguration:
  provider: "okta"
  authority: "https://your-domain.okta.com/oauth2/default"
  clientId: "${OKTA_CLIENT_ID}"
  clientSecret: "${OKTA_CLIENT_SECRET}"
  callbackUrl: "${OKTA_CALLBACK_URL}"
```

### Environment Variables

```bash
# Okta Configuration
AUTHENTICATION_PROVIDER=okta
OKTA_CLIENT_ID=your-okta-client-id
OKTA_CLIENT_SECRET=your-okta-client-secret
OKTA_DOMAIN=your-domain.okta.com
OKTA_CALLBACK_URL=http://localhost:8585/callback
```

### Implicit Flow Configuration

```yaml
authenticationConfiguration:
  provider: "okta"
  authority: "https://your-domain.okta.com/oauth2/default"
  clientId: "${OKTA_CLIENT_ID}"
  callbackUrl: "${OKTA_CALLBACK_URL}"
```

## Required Okta Settings

### Application Settings

In your Okta application settings, configure:

- **Application Type**: Web Application (for Auth Code Flow) or Single Page Application (for Implicit Flow)
- **Grant Types**: Authorization Code, Refresh Token, Implicit (hybrid) if needed
- **Sign-in redirect URIs**: `https://your-domain.com/callback`, `https://your-domain.com/silent-callback`
- **Sign-out redirect URIs**: `https://your-domain.com/`

### Authorization Server Configuration

- Create a dedicated authorization server
- Set the audience to your Client ID
- Configure default scopes
- Create access policies and rules

## Troubleshooting

<Accordion title="Invalid redirect URI">
Ensure your redirect URIs in Okta application settings match exactly with your Collate deployment URLs:
- Production: `https://your-domain.com/callback`
- Development: `http://localhost:8585/callback`
</Accordion>

<Accordion title="Invalid issuer">
- Verify the issuer URL is set to "Okta URL" instead of "Dynamic"
- Check that the authorization server is properly configured
- Ensure the authority URL matches your Okta domain
</Accordion>

<Accordion title="Token validation failed">
- Verify your Client ID and Client Secret are correctly configured
- Check that the audience matches your Client ID
- Ensure the authorization server has proper access policies and rules
</Accordion>